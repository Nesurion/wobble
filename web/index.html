<!DOCTYPE html>
<html>
	<head>
		<title>Wobble</title>

		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		
		<!--
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.3.0/mustache.min.js"></script>
		-->

		<script src="js/ext/underscore.js"></script>
		<!-- <script src="js/ext/underscore-min.js"></script> -->
		
		<script src="js/core/BUS.js"></script>
		<script src="js/core/JSONRPC.js"></script>
		<script src="js/core/WobbleAPI.js"></script>

		<script src="js/core/NotificationHandler.js"></script>
		
		<script src="js/core/BasicApplication.js"></script>

		<script src="js/wobble.contacts.js"></script>
		<script src="js/wobble.contactschooser.js"></script>
		<script src="js/wobble.contactsdetail.js"></script>
		
		<script src="js/wobble.topic.js"></script>
		
		<script src="js/wobble.topiclist.js"></script>
		
		<!-- UI Libraries for Views below -->
		<script src="js/ext/jquery-1.7.1.js"></script>
		<!--<script src="js/ext/jquery.min.js"></script>-->
		<script src="js/ext/mustache.min.js"></script>

		<!-- UI Views for Presenters above -->	
		<script src="js/jquery.wobble.js"></script>
		<script src="js/jquery.wobble.topiclist.js"></script>
		<script src="js/jquery.wobble.topic.js"></script>
		<script src="js/jquery.wobble.contacts.js"></script>

		
		<script src="js/desktop/DesktopClientHeader.js"></script>
		<script src="js/desktop/WobbleDesktopClient.js"></script>

		<!-- Login files -->
		<script src="js/login/LoginModel.js"></script>
		<script src="js/login/AbstractLoginView.js"></script>
		<script src="js/login/DesktopLoginView.js"></script>
		<script src="js/login/MobileLoginView.js"></script>
		<script src="js/login/LoginPresenter.js"></script>

		<!-- Mobile -->
		<script src="js/mobile/MobileNavigator.js"></script>
		<script src="js/mobile/WobbleMobileClient.js"></script>
		
		
		<link href="css/wobble.css" media="all" rel="stylesheet" type="text/css" />
		<link href="css/client.css" media="all" rel="stylesheet" type="text/css" />
		<!-- <link href="css/desktop.css" media="all" rel="stylesheet" type="text/css" />-->
		
		<script>
			window.WobbleApp = (function() {
				// An enforced app has priority over the UA detection
				var appName = localStorage.getItem('WOBBLE_ENFORCE_APP');
				if (appName == "mobile") {
					return new WobbleMobileClient();
				} else if(appName == "desktop") {
					return new WobbleDesktopClient();
				}

				// If the UA detects a mobile browser, use that
				var ua = navigator.userAgent;
				if (ua.match(/android/i) || 
					ua.match(/iphone/i)) {
					return new WobbleMobileClient();
				} 
				
				// Fallback: Standard desktop version
				return new WobbleDesktopClient();
				
			})();
			$(document).ready(function() {
				window.WobbleApp.bootstrap();
			});
		</script>
	</head>
	<body>
		Loading ...
	</body>
</html>